# 「AcWing 2022 CSP-J 模拟赛」砝码称重

## 问题转换

&emsp;&emsp;题意可以转换成**对于每个 $x \in \mathbb{N}$，求一个集合 $S$，令 $\sum S = x$，且每个数 $a \in [1, x]$ 都可以用 $S$ 中的数字的和表示，每个数字只用一次。输出 $|S|$ 的最小值。**

&emsp;&emsp;先上个结论。

## 结论

&emsp;&emsp;答案为 $\lfloor \log_2x \rfloor + 1$。

## 证明部分

### 引理 1

&emsp;&emsp;对每个 $x \in \mathbb{N}$，集合 $S = \lbrace 2^k | k \in [0, x] \rbrace$ 中的数可以表示所有的 $a \in [1, 2^x - 1]$。

#### 证明

&emsp;&emsp;利用二进制原理，集合 $S$ 中的数对应了二进制下的 $0 \sim k - 1$ 位。每一位都可以填 $1$ 或者填 $0$，对应着每个数选与不选，因此 $S$ 中的数即可表示出 $[1, 2^x - 1]$ 内所有的数。

### 引理 2

&emsp;&emsp;已知集合 $S$ 可以表示 $[1, 2^x - 1]$。则 $S \cup \lbrace b \rbrace ( b \in [0, 2^x] )$ 可以表示所有的 $a \in [1, 2^x - 1 + b] $。

#### 证明

&emsp;&emsp;根据引理 1，对于每个 $a \in [1, 2^x - 1]$ 都一定有一种方案可以表示，那么只要在这个方案的基础上加上 $b$，就可以表示 $a + b$，这样就可以将表示的数取遍 $[1, 2^x - 1 + b]$。

### 利用引理证明结论

&emsp;&emsp;有了这两个引理，证明其实就很容易了。可以将题目中要求的集合 $S$ 分为 $2$ 的次幂与非 $2$ 的次幂两部分，记为集合 $A$ 与数 $b$。用 $A$ 可以表示 $[1, 2^{\lfloor \log_2x \rfloor} - 1]$。在此基础上加上一个数 $b = x - 2^{\lfloor \log_2x \rfloor} - 1 $，即可表示所有的数。且由于 $\sum A = 2^{\lfloor \log_2x \rfloor} - 1$，所以这些数字的和一定为 $x$。又因为 $|A| = \lfloor \log_2x \rfloor$，所以 $|S| = \lfloor \log_2x \rfloor + 1$。

## 遗留问题

&emsp;&emsp;在上面的证明中我们其实只证明了二进制方法的可行性。至于它的最优性，笔者水平不足无法给出证明，若有奆佬还请赐教。